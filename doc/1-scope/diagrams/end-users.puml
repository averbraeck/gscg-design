@startuml

' === Global Config ===
hide circle
skinparam linetype ortho
skinparam nodesep 70
skinparam ranksep 60
skinparam packageStyle rectangle
skinparam defaultTextAlignment center
skinparam entity {
    BorderColor Black
    FontSize 12
    Padding 5
    BackgroundColor White
}
skinparam minClassWidth 150
skinparam minClassHeight 60

' Transparent packages for grouping
skinparam package {
    BorderColor transparent
    BackgroundColor transparent
}

' === Layer 1: Portals ===
package " " {
    entity "Portal" as portal #lightgreen
}

' === Layer 2: Organizations & Games ===
package " " {
    entity "Organization" as organization #lightgreen
    entity "Game Instance" as game #lightgreen
}

' === Layer 3: Sessions ===
package " " {
    entity "Game Session" as session #lightgreen
}

' === Layer 4: Roles ===
package " " {
    entity "Portal Admin" as padmin #lightblue
    entity "Org Admin" as oadmin #lightblue
    entity "Session Admin" as sadmin #lightblue
    entity "Game Designer" as designer #lightblue
    entity "Facilitator" as facilitator #lightblue
    entity "Data Analyst" as analyst #lightblue
    entity "Game Player" as player #lightblue
}

' === Hidden edges to enforce vertical alignment ===
' portal -[hidden]-> organization
' organization -[hidden]-> session
' game -[hidden]-> session

' === Relationships ===
game ||--o{ session
portal ||--{ padmin
portal ||--o{ organization
organization ||--o{ oadmin
organization ||--o{ session
session ||--{ player
session ||--{ facilitator
session ||--o{ sadmin
designer }o--o{ game
game }o--o{ analyst

@enduml
