# 4.1. Database design

Last Updated: 2025-08-26

__Changelog:__
 - 2025-08-11 - Document creation
 - 2025-08-26 - Update with more detail about the data layers
 - 2025-08-26 - Made the terminology consistent with the architecture document
 - 2025-08-26 - Added main tables for GSCG Admin data
 - 2025-08-27 - Added design for GSCG Admin Data database tables
 - 2025-08-27 - Added design for Game Design Data database tables


## High-level database design

The GSCG database is designed in three separate 'compartments' that are related, but managed by different roles:

1. **GSCG Admin data** with the organizations and users and their access rights.
2. **Game Design data** with the defined game instances with their actors, parameters, scenarios and player strategies.
3. **Game State data** with game sessions, game state, and game results

The results from the game can also be sent to the external data platform [gamedata.nl](https://gamedata.nl). In a sense, this defines a fourth data set:

4. **Game Play data** with game sessions, game state, and game results


## GSCG Admin data

The GSCG Admin data supports the roles, use cases and requirements for the Portal Administrator, Organization Administrator, and Session Administrator. Important tasks are user administration, game administration, organization administration, and session administration. This leads to the following envisioned tables in the database:

- `organization` with the data for an organization that can define and play games.
- `user` with the data of someone who can log into one of the apps for GSCG. Note that a `player` is not necessarily a `user`, since they can be anonymous. A user can have a special characteristic `portal_admin` for portal administrators, who can create and delete instances of `organization` and a `game`, and can allocate the `game_role` for the game designer and `organization_role` for the organization administrator. Also the portal_admin is the only user who can make a `game` available to an `organization`.
- `organization_role` with the roles that a `user` can fulfill for the `organization`. One of the roles is to be the organization administrator, who can allocate roles to oher users for the organization.
- `game` as a placeholder for the definition of a game. `game` is related to the tables where the game designer role (a `user` with a `game_role`) can define and update one or more instances of `game_version`.
- `game_version` as a version of the game. Multiple versions with differences can exist. Game versions are not by definition tied to a specific `organization`, allowing games to be played by multiple organizations.
- `game_role` connecting a game designer (a `user`) to a `game`.
- `organization_game` defining that a particular `organization` has access to a `game`, so the `organization` can instantiate a `game_session`.
- `game_session` is a frozen instance of a `game_version` that can be played on certain dates. It has allocated `players` and one or more game facilitators. A facilitator is a `user` with a certain role for that `game_session`.
- `game_session_role` defines the instances of `user` who can act as game facilitators, or session administrators.
- `player` contains the properties of self-generated game players, or game players generated by the game facilitator or session administrator. Since players can be anonymous, a `player` is not necessarily a persistent `user` in the database, but it can be.

The design of the GSCG Admin data tables looks as follows:

![](diagrams/gscg-database-admin.png)


## Game design data

Game design data contains all data necessary to create and start a game. The database from the previous GSCG project was extremely complicated, with multiple layers defining templates for actor definitions and their parameters on one layer, and actor instances and parameter values on another layer. This made the database complex, and instantiation slow. The database and the code to be executed do have a relation, of course. A database record (or set of records) defining an actor should contain the relevant properties for that actor as it is defined in the code. In that sense, the database 'mirrors' the simulation objects that have to be instantiated. The old database design was as follows:

![](diagrams/gscg_database_20070305.png)

Defining a game was a multi-month project due to the complexity of the database. In the design for this project, it might therefore be good to take a more lean approach, while keeping flexibility and maintainability. The tables for the game will be described in a number of steps below.


